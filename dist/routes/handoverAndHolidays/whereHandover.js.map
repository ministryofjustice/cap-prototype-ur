{
  "version": 3,
  "sources": ["../../../server/routes/handoverAndHolidays/whereHandover.ts"],
  "sourcesContent": ["import { Router } from 'express';\nimport { body, validationResult } from 'express-validator';\n\nimport { whereHandoverField } from '../../@types/fields';\nimport { WhereHandoverAnswer } from '../../@types/session';\nimport formFields from '../../constants/formFields';\nimport FORM_STEPS from '../../constants/formSteps';\nimport paths from '../../constants/paths';\nimport checkFormProgressFromConfig  from '../../middleware/checkFormProgressFromConfig';\nimport addCompletedStep from '../../utils/addCompletedStep';\nimport { isAnswerPerChild, isDesign2, isDesign3, isDesign4, isPerChildPoCEnabled, getSessionValue, setSessionSection } from '../../utils/perChildSession';\nimport { getBackUrl } from '../../utils/sessionHelpers';\n\n// Helper to get the field name for a specific child index\nconst getFieldName = (childIndex: number) => `${formFields.WHERE_HANDOVER}-${childIndex}`;\n\n// Helper to get the someone else field name for a specific child index\nconst getSomeoneElseFieldName = (childIndex: number) => `${formFields.WHERE_HANDOVER_SOMEONE_ELSE}-${childIndex}`;\n\n// Helper to get the child selector field name for a specific entry index\nconst _getChildSelectorFieldName = (entryIndex: number) => `child-selector-${entryIndex}`;\n\n// Helper to safely get a trimmed string from request body\nconst safeString = (value: unknown): string => {\n  if (typeof value === 'string') {\n    return value.trim();\n  }\n  return '';\n};\n\n// Helper to safely get an array from request body\nconst safeArray = (value: unknown): string[] => {\n  if (Array.isArray(value)) {\n    return value.filter((item): item is string => typeof item === 'string');\n  }\n  if (typeof value === 'string') {\n    return [value];\n  }\n  return [];\n};\n\nconst whereHandoverRoutes = (router: Router) => {\n  router.get(paths.HANDOVER_HOLIDAYS_WHERE_HANDOVER, checkFormProgressFromConfig(FORM_STEPS.HANDOVER_HOLIDAYS_WHERE_HANDOVER), (request, response) => {\n    const { numberOfChildren, namesOfChildren, handoverAndHolidays } = request.session;\n    const isD2 = isDesign2(request.session);\n    const activeChildIndex = isD2 ? (request.session.currentChildIndex ?? 0) : 0;\n    const activeChildName = isD2 ? namesOfChildren[activeChildIndex] : null;\n    const sessionHandoverAndHolidays = isD2 ? getSessionValue<any>(request.session, 'handoverAndHolidays') as typeof handoverAndHolidays : handoverAndHolidays;\n    const existingAnswers = sessionHandoverAndHolidays?.whereHandover;\n\n    // Build form values from existing session data\n    const formValues: Record<string, string | string[]> = {};\n\n    // Track which children have specific answers\n    const childrenWithAnswers: number[] = [];\n\n    if (existingAnswers) {\n      // Set the default answer (shown as \"all children\" or first entry)\n      if (existingAnswers.default?.where) {\n        formValues[getFieldName(0)] = existingAnswers.default.where;\n      }\n      if (existingAnswers.default?.someoneElse) {\n        formValues[getSomeoneElseFieldName(0)] = existingAnswers.default.someoneElse;\n      }\n\n      // Set per-child answers\n      if (existingAnswers.byChild) {\n        Object.entries(existingAnswers.byChild).forEach(([childIndex, answer]) => {\n          const idx = parseInt(childIndex, 10);\n          if (answer.where) {\n            childrenWithAnswers.push(idx);\n            formValues[getFieldName(idx)] = answer.where;\n            if (answer.someoneElse) {\n              formValues[getSomeoneElseFieldName(idx)] = answer.someoneElse;\n            }\n          }\n        });\n      }\n    }\n\n    // Build list of children for dropdown options\n    const childOptions = namesOfChildren.map((name, index) => ({\n      value: index.toString(),\n      text: name,\n    }));\n\n    response.render('pages/handoverAndHolidays/whereHandover', {\n      errors: request.flash('errors'),\n      formValues: { ...formValues, ...request.flash('formValues')?.[0] },\n      values: request.session,\n      title: isD2 ? `Where will ${activeChildName}'s handover take place?` : request.__('handoverAndHolidays.whereHandover.title'),\n      backLinkHref: getBackUrl(request.session, paths.HANDOVER_HOLIDAYS_GET_BETWEEN_HOUSEHOLDS),\n      numberOfChildren,\n      namesOfChildren,\n      childOptions,\n      childrenWithAnswers,\n      childProgressCaption: isD2 ? `Child ${activeChildIndex + 1} of ${numberOfChildren}` : null,\n      showPerChildOption: numberOfChildren > 1 && isAnswerPerChild(request.session) && !isDesign3(request.session) && isPerChildPoCEnabled(request.session),\n      showDesign3Option: numberOfChildren > 1 && isDesign3(request.session) && isPerChildPoCEnabled(request.session),\n      designMode: request.session.perChildDesignMode || 'design1',\n    });\n  });\n\n  router.post(\n    paths.HANDOVER_HOLIDAYS_WHERE_HANDOVER,\n    (request, response, next) => {\n      const { numberOfChildren } = request.session;\n\n      // Dynamic validation based on submitted fields\n      const validations: ReturnType<typeof body>[] = [];\n\n      // Always validate the default/first answer\n      validations.push(\n        body(getFieldName(0))\n          .exists()\n          .toArray()\n          .withMessage((_value, { req }) => req.__('handoverAndHolidays.whereHandover.emptyError'))\n      );\n\n      // Validate exclusive \"someoneElse\" for default\n      validations.push(\n        body(getFieldName(0))\n          .toArray()\n          .custom(\n            (whereHandover: whereHandoverField[]) => !(whereHandover.length > 1 && whereHandover.includes('someoneElse')),\n          )\n          .withMessage((_value, { req }) => req.__('handoverAndHolidays.whereHandover.multiSelectedError'))\n      );\n\n      // Validate the someone else field if \"someoneElse\" is selected for default\n      validations.push(\n        body(getSomeoneElseFieldName(0))\n          .if(body(getFieldName(0)).toArray().custom((value: string[]) => value && value.includes('someoneElse')))\n          .trim()\n          .notEmpty()\n          .withMessage((_value, { req }) => req.__('handoverAndHolidays.whereHandover.arrangementMissingError'))\n      );\n\n      // Check for per-child entries and validate them\n      for (let i = 1; i <= numberOfChildren; i++) {\n        const fieldName = getFieldName(i);\n        const someoneElseFieldName = getSomeoneElseFieldName(i);\n\n        // Only validate if the field exists in the request\n        if (request.body[fieldName] !== undefined && request.body[fieldName] !== '') {\n          validations.push(\n            body(fieldName)\n              .exists()\n              .toArray()\n              .withMessage((_value, { req }) => req.__('handoverAndHolidays.whereHandover.emptyError'))\n          );\n\n          // Validate exclusive \"someoneElse\" for this child\n          validations.push(\n            body(fieldName)\n              .toArray()\n              .custom(\n                (whereHandover: whereHandoverField[]) => !(whereHandover.length > 1 && whereHandover.includes('someoneElse')),\n              )\n              .withMessage((_value, { req }) => req.__('handoverAndHolidays.whereHandover.multiSelectedError'))\n          );\n\n          // Validate the someone else field if \"someoneElse\" is selected for this child\n          validations.push(\n            body(someoneElseFieldName)\n              .if(body(fieldName).toArray().custom((value: string[]) => value && value.includes('someoneElse')))\n              .trim()\n              .notEmpty()\n              .withMessage((_value, { req }) => req.__('handoverAndHolidays.whereHandover.arrangementMissingError'))\n          );\n        }\n      }\n\n      // Run all validations\n      Promise.all(validations.map(validation => validation.run(request)))\n        .then(() => next())\n        .catch(next);\n    },\n    (request, response) => {\n      // Design 3: handle \"specify per child\" - switch to per-child (Design 2) mode\n      if (isDesign3(request.session) && request.body['specify-per-child'] === 'yes') {\n        request.session.perChildDesignMode = 'design2' as any;\n        request.session.currentChildIndex = 0;\n        if (!request.session.childPlans || request.session.childPlans.length === 0) {\n          request.session.childPlans = (request.session.namesOfChildren || []).map((name: string, index: number) => ({\n            childIndex: index,\n            childName: name,\n            isComplete: false,\n          }));\n        }\n        return response.redirect(paths.HANDOVER_HOLIDAYS_WHERE_HANDOVER);\n      }\n\n      const errors = validationResult(request);\n\n      if (!errors.isEmpty()) {\n        request.flash('errors', errors.array());\n        request.flash('formValues', request.body);\n        return response.redirect(paths.HANDOVER_HOLIDAYS_WHERE_HANDOVER);\n      }\n\n      // Process the default answer\n      const defaultWhere = safeArray(request.body[getFieldName(0)]);\n      const defaultSomeoneElse = safeString(request.body[getSomeoneElseFieldName(0)]);\n\n      // Build the per-child answers structure\n      const byChild: Record<number, WhereHandoverAnswer> = {};\n\n      // Check for additional per-child entries\n      // We look for patterns like child-selector-1, child-selector-2, etc.\n      // and their corresponding answer fields\n      let additionalEntries: Array<{childIndex: number, where: string[], someoneElse: string, entryIndex: number}>;\n\n      if (isDesign4(request.session)) {\n        // Design 4: checkboxes can select multiple children per entry\n        additionalEntries = Object.keys(request.body)\n          .filter(key => /^child-checkbox-\\d+$/.test(key))\n          .flatMap(key => {\n            const entryIndex = parseInt(key.replace('child-checkbox-', ''), 10);\n            const rawValues = request.body[key];\n            const childIndices = (Array.isArray(rawValues) ? rawValues : [rawValues])\n              .map((v: string) => parseInt(v, 10))\n              .filter((v: number) => !isNaN(v));\n            const whereFieldName = getFieldName(entryIndex);\n            const someoneElseFieldName = getSomeoneElseFieldName(entryIndex);\n            const where = safeArray(request.body[whereFieldName]);\n            const someoneElse = safeString(request.body[someoneElseFieldName]);\n            return childIndices.map(childIndex => ({ childIndex, where, someoneElse, entryIndex }));\n          })\n          .filter(entry => entry.where.length > 0);\n      } else {\n        // Design 1: SELECT dropdown with single child\n        additionalEntries = Object.keys(request.body)\n          .filter(key => key.startsWith('child-selector-'))\n          .map(key => {\n            const entryIndex = parseInt(key.replace('child-selector-', ''), 10);\n            const childIndex = parseInt(request.body[key], 10);\n            const whereFieldName = getFieldName(entryIndex);\n            const someoneElseFieldName = getSomeoneElseFieldName(entryIndex);\n            const where = safeArray(request.body[whereFieldName]);\n            const someoneElse = safeString(request.body[someoneElseFieldName]);\n            return { childIndex, where, someoneElse, entryIndex };\n          })\n          .filter(entry => !isNaN(entry.childIndex) && entry.where.length > 0);\n      }\n\n      // Store per-child answers\n      additionalEntries.forEach(entry => {\n        byChild[entry.childIndex] = {\n          noDecisionRequired: false,\n          where: entry.where as whereHandoverField[],\n          someoneElse: entry.where.includes('someoneElse') ? entry.someoneElse : undefined,\n        };\n      });\n\n      const { numberOfChildren } = request.session;\n\n      const newWhereHandover = {\n        default: {\n          noDecisionRequired: false,\n          where: defaultWhere as whereHandoverField[],\n          someoneElse: defaultWhere.includes('someoneElse') ? defaultSomeoneElse : undefined,\n        },\n        ...(Object.keys(byChild).length > 0 ? { byChild } : {}),\n      };\n\n      if (isDesign2(request.session)) {\n        const currentHAH = getSessionValue<any>(request.session, 'handoverAndHolidays') || {};\n        setSessionSection(request.session, 'handoverAndHolidays', { ...currentHAH, whereHandover: newWhereHandover });\n      } else {\n        request.session.handoverAndHolidays = {\n          ...request.session.handoverAndHolidays,\n          whereHandover: newWhereHandover,\n        };\n      }\n\n      addCompletedStep(request, FORM_STEPS.HANDOVER_HOLIDAYS_WHERE_HANDOVER);\n\n      if (isDesign2(request.session)) {\n        if (request.body['apply-to-all'] === 'yes') {\n          const savedIndex = request.session.currentChildIndex ?? 0;\n          for (let i = 0; i < numberOfChildren; i++) {\n            if (i !== savedIndex) {\n              request.session.currentChildIndex = i;\n              const childHAH = getSessionValue<any>(request.session, 'handoverAndHolidays') || {};\n              setSessionSection(request.session, 'handoverAndHolidays', { ...childHAH, whereHandover: newWhereHandover });\n            }\n          }\n          request.session.currentChildIndex = 0;\n          return response.redirect(paths.TASK_LIST);\n        }\n        const nextChildIndex = (request.session.currentChildIndex ?? 0) + 1;\n        if (nextChildIndex < numberOfChildren) {\n          request.session.currentChildIndex = nextChildIndex;\n          return response.redirect(paths.HANDOVER_HOLIDAYS_WHERE_HANDOVER);\n        }\n        request.session.currentChildIndex = 0;\n        return response.redirect(paths.TASK_LIST);\n      }\n\n      return response.redirect(paths.HANDOVER_HOLIDAYS_WILL_CHANGE_DURING_SCHOOL_HOLIDAYS);\n    },\n  );\n\n  router.post(paths.HANDOVER_HOLIDAYS_WHERE_HANDOVER_NOT_REQUIRED, (request, response) => {\n    request.session.handoverAndHolidays = {\n      ...request.session.handoverAndHolidays,\n      whereHandover: {\n        default: {\n          noDecisionRequired: true,\n        },\n      },\n    };\n\n    addCompletedStep(request, FORM_STEPS.HANDOVER_HOLIDAYS_WHERE_HANDOVER);\n\n    return response.redirect(paths.HANDOVER_HOLIDAYS_WILL_CHANGE_DURING_SCHOOL_HOLIDAYS);\n  });\n};\n\nexport default whereHandoverRoutes;\n"],
  "mappings": "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",
  "names": ["formFields", "paths", "checkFormProgressFromConfig", "FORM_STEPS", "addCompletedStep"]
}
