{
  "version": 3,
  "sources": ["../server/config.ts"],
  "sourcesContent": ["const production = process.env.NODE_ENV === 'production';\n\nconst getStringConfigValue = (name: string): string => {\n  if (process.env[name]) {\n    return process.env[name];\n  }\n  throw new Error(`Missing env var ${name}`);\n};\n\nconst getBoolConfigValue = (name: string): boolean => {\n  return getStringConfigValue(name) === 'true';\n};\n\nconst getIntConfigValue = (name: string): number => {\n  return parseInt(getStringConfigValue(name), 10);\n};\n\nconst getStringArray = (name: string) => getStringConfigValue(name).split(',');\n\nconst getCacheConfig = () => {\n  const enabled = getBoolConfigValue('CACHE_ENABLED');\n\n  if (enabled) {\n    return {\n      enabled: true,\n      host: getStringConfigValue('CACHE_HOST'),\n      password: getStringConfigValue('CACHE_PASSWORD'),\n      tls_enabled: getBoolConfigValue('CACHE_TLS_ENABLED'),\n    };\n  }\n\n  return {\n    enabled: false,\n    host: undefined,\n    password: undefined,\n    tls_enabled: undefined,\n  };\n};\n\nconst config = {\n  buildNumber: getStringConfigValue('BUILD_NUMBER'),\n  gitRef: getStringConfigValue('GIT_REF'),\n  gitBranch: getStringConfigValue('GIT_BRANCH'),\n  includeWelshLanguage: getBoolConfigValue('INCLUDE_WELSH_LANGUAGE'),\n  production,\n  useHttps: getBoolConfigValue('USE_HTTPS'),\n  staticResourceCacheDuration: getStringConfigValue('STATIC_RESOURCE_CACHE_DURATION'),\n  analytics: {\n    ga4Id: process.env.GA4_ID,\n    enabled: process.env.ENABLE_ANALYTICS !== 'false', // Defaults to true unless explicitly disabled\n    hashSecret: process.env.HASH_SECRET,\n  },\n  cache: getCacheConfig(),\n  session: {\n    secret: getStringConfigValue('SESSION_SECRET'),\n    expiryMinutes: getIntConfigValue('WEB_SESSION_TIMEOUT_IN_MINUTES'),\n  },\n  passwords: getStringArray('BETA_ACCESS_PASSWORDS'),\n  useAuth: getBoolConfigValue('USE_AUTH'),\n  isLiveService: process.env.IS_LIVE_SERVICE === 'true',\n  feedbackUrl: getStringConfigValue('FEEDBACK_URL'),\n  contactEmail: getStringConfigValue('CONTACT_EMAIL'),\n  previewEnd: new Date(getStringConfigValue('PREVIEW_END')),\n};\n\nif (production) {\n  if (!config.useHttps || !config.cache.tls_enabled) {\n    throw new Error(`HTTPS must be enabled on production environments`);\n  }\n\n  if (!config.cache.enabled) {\n    throw new Error(`Cache must be used on production environments`);\n  }\n}\n\nexport default config;\n"],
  "mappings": ";;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAM,aAAa,QAAQ,IAAI,aAAa;AAE5C,MAAM,uBAAuB,CAAC,SAAyB;AACrD,MAAI,QAAQ,IAAI,IAAI,GAAG;AACrB,WAAO,QAAQ,IAAI,IAAI;AAAA,EACzB;AACA,QAAM,IAAI,MAAM,mBAAmB,IAAI,EAAE;AAC3C;AAEA,MAAM,qBAAqB,CAAC,SAA0B;AACpD,SAAO,qBAAqB,IAAI,MAAM;AACxC;AAEA,MAAM,oBAAoB,CAAC,SAAyB;AAClD,SAAO,SAAS,qBAAqB,IAAI,GAAG,EAAE;AAChD;AAEA,MAAM,iBAAiB,CAAC,SAAiB,qBAAqB,IAAI,EAAE,MAAM,GAAG;AAE7E,MAAM,iBAAiB,MAAM;AAC3B,QAAM,UAAU,mBAAmB,eAAe;AAElD,MAAI,SAAS;AACX,WAAO;AAAA,MACL,SAAS;AAAA,MACT,MAAM,qBAAqB,YAAY;AAAA,MACvC,UAAU,qBAAqB,gBAAgB;AAAA,MAC/C,aAAa,mBAAmB,mBAAmB;AAAA,IACrD;AAAA,EACF;AAEA,SAAO;AAAA,IACL,SAAS;AAAA,IACT,MAAM;AAAA,IACN,UAAU;AAAA,IACV,aAAa;AAAA,EACf;AACF;AAEA,MAAM,SAAS;AAAA,EACb,aAAa,qBAAqB,cAAc;AAAA,EAChD,QAAQ,qBAAqB,SAAS;AAAA,EACtC,WAAW,qBAAqB,YAAY;AAAA,EAC5C,sBAAsB,mBAAmB,wBAAwB;AAAA,EACjE;AAAA,EACA,UAAU,mBAAmB,WAAW;AAAA,EACxC,6BAA6B,qBAAqB,gCAAgC;AAAA,EAClF,WAAW;AAAA,IACT,OAAO,QAAQ,IAAI;AAAA,IACnB,SAAS,QAAQ,IAAI,qBAAqB;AAAA;AAAA,IAC1C,YAAY,QAAQ,IAAI;AAAA,EAC1B;AAAA,EACA,OAAO,eAAe;AAAA,EACtB,SAAS;AAAA,IACP,QAAQ,qBAAqB,gBAAgB;AAAA,IAC7C,eAAe,kBAAkB,gCAAgC;AAAA,EACnE;AAAA,EACA,WAAW,eAAe,uBAAuB;AAAA,EACjD,SAAS,mBAAmB,UAAU;AAAA,EACtC,eAAe,QAAQ,IAAI,oBAAoB;AAAA,EAC/C,aAAa,qBAAqB,cAAc;AAAA,EAChD,cAAc,qBAAqB,eAAe;AAAA,EAClD,YAAY,IAAI,KAAK,qBAAqB,aAAa,CAAC;AAC1D;AAEA,IAAI,YAAY;AACd,MAAI,CAAC,OAAO,YAAY,CAAC,OAAO,MAAM,aAAa;AACjD,UAAM,IAAI,MAAM,kDAAkD;AAAA,EACpE;AAEA,MAAI,CAAC,OAAO,MAAM,SAAS;AACzB,UAAM,IAAI,MAAM,+CAA+C;AAAA,EACjE;AACF;AAEA,IAAO,iBAAQ;",
  "names": []
}
