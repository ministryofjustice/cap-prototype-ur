{
  "version": 3,
  "sources": ["../../server/middleware/setUpi18n.ts"],
  "sourcesContent": ["import path from 'path';\n\nimport { Router } from 'express';\nimport i18n from 'i18n';\n\nimport config from '../config';\n\nconst setUpi18n = (): Router => {\n  const router = Router();\n\n  const { includeWelshLanguage } = config;\n\n  i18n.configure({\n    defaultLocale: 'en',\n    locales: includeWelshLanguage ? ['en', 'cy'] : ['en'],\n    queryParameter: 'lang',\n    cookie: 'lang',\n    directory: path.resolve(__dirname, '../locales'),\n    updateFiles: false,\n    retryInDefaultLocale: true,\n    objectNotation: true,\n  });\n\n  router.use(i18n.init);\n\n  return router;\n};\n\nexport const setUpLocaleFromSession = (): Router => {\n  const router = Router();\n\n  router.use((req, res, next) => {\n    const lang = req.query.lang as string;\n    if (lang && i18n.getLocales().includes(lang)) {\n      req.session.lang = lang;\n      res.setLocale(lang);\n    } else if (req.session?.lang) {\n      res.setLocale(req.session.lang);\n    }\n    next();\n  });\n\n  return router;\n};\n\nexport default setUpi18n;\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAAiB;AAEjB,qBAAuB;AACvB,kBAAiB;AAEjB,oBAAmB;AAEnB,MAAM,YAAY,MAAc;AAC9B,QAAM,aAAS,uBAAO;AAEtB,QAAM,EAAE,qBAAqB,IAAI,cAAAA;AAEjC,cAAAC,QAAK,UAAU;AAAA,IACb,eAAe;AAAA,IACf,SAAS,uBAAuB,CAAC,MAAM,IAAI,IAAI,CAAC,IAAI;AAAA,IACpD,gBAAgB;AAAA,IAChB,QAAQ;AAAA,IACR,WAAW,YAAAC,QAAK,QAAQ,WAAW,YAAY;AAAA,IAC/C,aAAa;AAAA,IACb,sBAAsB;AAAA,IACtB,gBAAgB;AAAA,EAClB,CAAC;AAED,SAAO,IAAI,YAAAD,QAAK,IAAI;AAEpB,SAAO;AACT;AAEO,MAAM,yBAAyB,MAAc;AAClD,QAAM,aAAS,uBAAO;AAEtB,SAAO,IAAI,CAAC,KAAK,KAAK,SAAS;AAC7B,UAAM,OAAO,IAAI,MAAM;AACvB,QAAI,QAAQ,YAAAA,QAAK,WAAW,EAAE,SAAS,IAAI,GAAG;AAC5C,UAAI,QAAQ,OAAO;AACnB,UAAI,UAAU,IAAI;AAAA,IACpB,WAAW,IAAI,SAAS,MAAM;AAC5B,UAAI,UAAU,IAAI,QAAQ,IAAI;AAAA,IAChC;AACA,SAAK;AAAA,EACP,CAAC;AAED,SAAO;AACT;AAEA,IAAO,oBAAQ;",
  "names": ["config", "i18n", "path"]
}
