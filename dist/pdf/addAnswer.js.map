{
  "version": 3,
  "sources": ["../../server/pdf/addAnswer.ts"],
  "sourcesContent": ["import { MAIN_TEXT_SIZE, PARAGRAPH_SPACE, QUESTION_TITLE_SIZE, SECTION_HEADING_SIZE } from '../constants/pdfConstants';\nimport { PerChildFormattedAnswerForPdf } from '../utils/formattedAnswersForPdf';\n\nimport DoYouAgreeComponent from './components/doYouAgree';\nimport SplittableTextComponent from './components/splittableText';\nimport TextboxComponent from './components/textbox';\nimport FontStyles from './fontStyles';\nimport Pdf from './pdf';\n\n// Type guard to check if answer is a per-child answer structure\nconst isPerChildAnswer = (answer: string | PerChildFormattedAnswerForPdf): answer is PerChildFormattedAnswerForPdf => {\n  return typeof answer === 'object' && 'defaultAnswer' in answer;\n};\n\nconst addAnswer = (\n  pdf: Pdf,\n  sectionHeading: string | undefined,\n  question: string,\n  subtext: string | undefined,\n  answer: string | PerChildFormattedAnswerForPdf | undefined,\n  disagreeText: string,\n) => {\n  if (!answer) return;\n\n  // Build the paragraphs array\n  const paragraphs: Array<{\n    text: string;\n    size: number;\n    style: FontStyles;\n    bottomPadding: number;\n    splittable?: boolean;\n  } | undefined> = [\n    sectionHeading\n      ? {\n          text: sectionHeading,\n          size: SECTION_HEADING_SIZE,\n          style: FontStyles.BOLD,\n          bottomPadding: PARAGRAPH_SPACE,\n        }\n      : undefined,\n    {\n      text: question,\n      size: QUESTION_TITLE_SIZE,\n      style: FontStyles.BOLD,\n      bottomPadding: PARAGRAPH_SPACE,\n    },\n    subtext\n      ? {\n          text: subtext,\n          size: MAIN_TEXT_SIZE,\n          style: FontStyles.NORMAL,\n          bottomPadding: PARAGRAPH_SPACE,\n        }\n      : undefined,\n  ];\n\n  // Handle per-child answer structure\n  if (isPerChildAnswer(answer)) {\n    const numberOfChildren = pdf.request.session.numberOfChildren || 1;\n    const perChildCount = answer.perChildAnswers?.length || 0;\n    const hasPerChildAnswers = perChildCount > 0;\n    const allChildrenHaveSpecificAnswers = perChildCount >= numberOfChildren;\n\n    // Add per-child answers first\n    if (answer.perChildAnswers) {\n      for (const childAnswer of answer.perChildAnswers) {\n        // Add child name label\n        paragraphs.push({\n          text: `For ${childAnswer.childName}:`,\n          size: MAIN_TEXT_SIZE,\n          style: FontStyles.BOLD,\n          bottomPadding: PARAGRAPH_SPACE / 2,\n        });\n\n        // Add the child's answer\n        paragraphs.push({\n          text: childAnswer.answer,\n          size: MAIN_TEXT_SIZE,\n          style: FontStyles.NORMAL,\n          bottomPadding: PARAGRAPH_SPACE,\n          splittable: true,\n        });\n      }\n    }\n\n    // Then show default answer for remaining children (if not all have specific answers)\n    if (!allChildrenHaveSpecificAnswers && answer.defaultAnswer) {\n      // Add label - \"For all other children:\" if some have specific answers, otherwise \"For all children:\"\n      paragraphs.push({\n        text: hasPerChildAnswers ? 'For all other children:' : 'For all children:',\n        size: MAIN_TEXT_SIZE,\n        style: FontStyles.BOLD,\n        bottomPadding: PARAGRAPH_SPACE / 2,\n      });\n\n      // Add the default answer\n      paragraphs.push({\n        text: answer.defaultAnswer,\n        size: MAIN_TEXT_SIZE,\n        style: FontStyles.NORMAL,\n        bottomPadding: PARAGRAPH_SPACE,\n        splittable: true,\n      });\n    }\n  } else {\n    // Simple string answer\n    paragraphs.push({\n      text: answer,\n      size: MAIN_TEXT_SIZE,\n      style: FontStyles.NORMAL,\n      bottomPadding: PARAGRAPH_SPACE,\n      splittable: true,\n    });\n  }\n\n  new SplittableTextComponent(\n    pdf,\n    paragraphs.filter((paragraph) => !!paragraph),\n  ).addComponentToDocument();\n\n  new DoYouAgreeComponent(pdf, pdf.request.__('sharePlan.yourProposedPlan.doYouAgree')).addComponentToDocument();\n\n  new TextboxComponent(pdf, [\n    {\n      text: disagreeText,\n      size: MAIN_TEXT_SIZE,\n      style: FontStyles.NORMAL,\n      bottomPadding: PARAGRAPH_SPACE,\n    },\n  ]).addComponentToDocument();\n};\n\nexport default addAnswer;\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BAA2F;AAG3F,wBAAgC;AAChC,4BAAoC;AACpC,qBAA6B;AAC7B,wBAAuB;AAIvB,MAAM,mBAAmB,CAAC,WAA4F;AACpH,SAAO,OAAO,WAAW,YAAY,mBAAmB;AAC1D;AAEA,MAAM,YAAY,CAChB,KACA,gBACA,UACA,SACA,QACA,iBACG;AACH,MAAI,CAAC,OAAQ;AAGb,QAAM,aAMW;AAAA,IACf,iBACI;AAAA,MACE,MAAM;AAAA,MACN,MAAM;AAAA,MACN,OAAO,kBAAAA,QAAW;AAAA,MAClB,eAAe;AAAA,IACjB,IACA;AAAA,IACJ;AAAA,MACE,MAAM;AAAA,MACN,MAAM;AAAA,MACN,OAAO,kBAAAA,QAAW;AAAA,MAClB,eAAe;AAAA,IACjB;AAAA,IACA,UACI;AAAA,MACE,MAAM;AAAA,MACN,MAAM;AAAA,MACN,OAAO,kBAAAA,QAAW;AAAA,MAClB,eAAe;AAAA,IACjB,IACA;AAAA,EACN;AAGA,MAAI,iBAAiB,MAAM,GAAG;AAC5B,UAAM,mBAAmB,IAAI,QAAQ,QAAQ,oBAAoB;AACjE,UAAM,gBAAgB,OAAO,iBAAiB,UAAU;AACxD,UAAM,qBAAqB,gBAAgB;AAC3C,UAAM,iCAAiC,iBAAiB;AAGxD,QAAI,OAAO,iBAAiB;AAC1B,iBAAW,eAAe,OAAO,iBAAiB;AAEhD,mBAAW,KAAK;AAAA,UACd,MAAM,OAAO,YAAY,SAAS;AAAA,UAClC,MAAM;AAAA,UACN,OAAO,kBAAAA,QAAW;AAAA,UAClB,eAAe,sCAAkB;AAAA,QACnC,CAAC;AAGD,mBAAW,KAAK;AAAA,UACd,MAAM,YAAY;AAAA,UAClB,MAAM;AAAA,UACN,OAAO,kBAAAA,QAAW;AAAA,UAClB,eAAe;AAAA,UACf,YAAY;AAAA,QACd,CAAC;AAAA,MACH;AAAA,IACF;AAGA,QAAI,CAAC,kCAAkC,OAAO,eAAe;AAE3D,iBAAW,KAAK;AAAA,QACd,MAAM,qBAAqB,4BAA4B;AAAA,QACvD,MAAM;AAAA,QACN,OAAO,kBAAAA,QAAW;AAAA,QAClB,eAAe,sCAAkB;AAAA,MACnC,CAAC;AAGD,iBAAW,KAAK;AAAA,QACd,MAAM,OAAO;AAAA,QACb,MAAM;AAAA,QACN,OAAO,kBAAAA,QAAW;AAAA,QAClB,eAAe;AAAA,QACf,YAAY;AAAA,MACd,CAAC;AAAA,IACH;AAAA,EACF,OAAO;AAEL,eAAW,KAAK;AAAA,MACd,MAAM;AAAA,MACN,MAAM;AAAA,MACN,OAAO,kBAAAA,QAAW;AAAA,MAClB,eAAe;AAAA,MACf,YAAY;AAAA,IACd,CAAC;AAAA,EACH;AAEA,MAAI,sBAAAC;AAAA,IACF;AAAA,IACA,WAAW,OAAO,CAAC,cAAc,CAAC,CAAC,SAAS;AAAA,EAC9C,EAAE,uBAAuB;AAEzB,MAAI,kBAAAC,QAAoB,KAAK,IAAI,QAAQ,GAAG,uCAAuC,CAAC,EAAE,uBAAuB;AAE7G,MAAI,eAAAC,QAAiB,KAAK;AAAA,IACxB;AAAA,MACE,MAAM;AAAA,MACN,MAAM;AAAA,MACN,OAAO,kBAAAH,QAAW;AAAA,MAClB,eAAe;AAAA,IACjB;AAAA,EACF,CAAC,EAAE,uBAAuB;AAC5B;AAEA,IAAO,oBAAQ;",
  "names": ["FontStyles", "SplittableTextComponent", "DoYouAgreeComponent", "TextboxComponent"]
}
