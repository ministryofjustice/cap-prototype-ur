{
  "version": 3,
  "sources": ["../../../server/pdf/components/doYouAgree.ts"],
  "sourcesContent": ["import { AcroFormRadioButton } from 'jspdf';\n\nimport { Paragraph } from '../../@types/pdf';\nimport {\n  LINE_HEIGHT_RATIO,\n  MAIN_TEXT_SIZE,\n  MARGIN_WIDTH,\n  MM_PER_POINT,\n  PARAGRAPH_SPACE,\n} from '../../constants/pdfConstants';\nimport logger from '../../logging/logger';\nimport FontStyles from '../fontStyles';\nimport Pdf from '../pdf';\n\nimport BaseComponent from './base';\n\nclass DoYouAgree extends BaseComponent {\n  private readonly radioGroup: AcroFormRadioButton;\n\n  private currentX = MARGIN_WIDTH;\n\n  private readonly CHECKBOX_SIZE = 10;\n  private readonly CHECKBOX_HORIZONTAL_GAP = 7;\n  private readonly CHECKBOX_TEXT_GAP = 3;\n  private readonly doYouAgreeParagraph: Paragraph;\n\n  constructor(pdf: Pdf, text: string) {\n    super(pdf);\n    this.doYouAgreeParagraph = {\n      text,\n      size: MAIN_TEXT_SIZE,\n      style: FontStyles.NORMAL,\n      bottomPadding: this.CHECKBOX_TEXT_GAP,\n    };\n    this.radioGroup = new AcroFormRadioButton();\n    this.radioGroup.radio = true;\n    this.radioGroup.caption = '8';\n  }\n\n  private addOption(text: string) {\n    const textWithStyles = {\n      text,\n      x: this.currentX,\n      y: this.pdf.currentY + this.CHECKBOX_SIZE / 2 + 0.25 * LINE_HEIGHT_RATIO * MAIN_TEXT_SIZE * MM_PER_POINT,\n      size: MAIN_TEXT_SIZE,\n      style: FontStyles.NORMAL,\n    };\n\n    this.pdf.addText(textWithStyles);\n\n    this.currentX += this.pdf.getTextWidth(textWithStyles) + this.CHECKBOX_TEXT_GAP;\n\n    this.pdf.drawBorder(this.currentX, this.pdf.currentY, this.CHECKBOX_SIZE, this.CHECKBOX_SIZE);\n    Object.assign(this.radioGroup.createOption(text), {\n      x: this.currentX,\n      y: this.pdf.currentY,\n      width: this.CHECKBOX_SIZE,\n      height: this.CHECKBOX_SIZE,\n    });\n\n    this.currentX += this.CHECKBOX_SIZE + this.CHECKBOX_HORIZONTAL_GAP;\n  }\n\n  protected getComponentHeight() {\n    return this.pdf.getParagraphHeight(this.doYouAgreeParagraph) + this.CHECKBOX_SIZE + PARAGRAPH_SPACE;\n  }\n\n  protected createComponent() {\n    this.pdf.addParagraph(this.doYouAgreeParagraph);\n\n    this.pdf.document.addField(this.radioGroup);\n\n    this.addOption(this.pdf.request.__('yes'));\n    this.addOption(this.pdf.request.__('no'));\n\n    // Set appearance must be done after the options are created, or it will not work\n    // @ts-expect-error There is an error into the jsPDF type declaration.\n    this.radioGroup.setAppearance(this.pdf.document.AcroForm.Appearance.RadioButton.Cross);\n\n    this.pdf.currentY += this.CHECKBOX_SIZE + PARAGRAPH_SPACE;\n  }\n\n  protected handleComponentOverflowingPage() {\n    this.pdf.createNewPage();\n    if (this.pdf.heightWillOverflowDocument(this.getComponentHeight())) {\n      logger.error('Creating a PDF with an overflowing page');\n    }\n    this.createComponent();\n  }\n}\n\nexport default DoYouAgree;\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAAoC;AAGpC,0BAMO;AACP,oBAAmB;AACnB,wBAAuB;AAGvB,kBAA0B;AAE1B,MAAM,mBAAmB,YAAAA,QAAc;AAAA,EACpB;AAAA,EAET,WAAW;AAAA,EAEF,gBAAgB;AAAA,EAChB,0BAA0B;AAAA,EAC1B,oBAAoB;AAAA,EACpB;AAAA,EAEjB,YAAY,KAAU,MAAc;AAClC,UAAM,GAAG;AACT,SAAK,sBAAsB;AAAA,MACzB;AAAA,MACA,MAAM;AAAA,MACN,OAAO,kBAAAC,QAAW;AAAA,MAClB,eAAe,KAAK;AAAA,IACtB;AACA,SAAK,aAAa,IAAI,iCAAoB;AAC1C,SAAK,WAAW,QAAQ;AACxB,SAAK,WAAW,UAAU;AAAA,EAC5B;AAAA,EAEQ,UAAU,MAAc;AAC9B,UAAM,iBAAiB;AAAA,MACrB;AAAA,MACA,GAAG,KAAK;AAAA,MACR,GAAG,KAAK,IAAI,WAAW,KAAK,gBAAgB,IAAI,OAAO,wCAAoB,qCAAiB;AAAA,MAC5F,MAAM;AAAA,MACN,OAAO,kBAAAA,QAAW;AAAA,IACpB;AAEA,SAAK,IAAI,QAAQ,cAAc;AAE/B,SAAK,YAAY,KAAK,IAAI,aAAa,cAAc,IAAI,KAAK;AAE9D,SAAK,IAAI,WAAW,KAAK,UAAU,KAAK,IAAI,UAAU,KAAK,eAAe,KAAK,aAAa;AAC5F,WAAO,OAAO,KAAK,WAAW,aAAa,IAAI,GAAG;AAAA,MAChD,GAAG,KAAK;AAAA,MACR,GAAG,KAAK,IAAI;AAAA,MACZ,OAAO,KAAK;AAAA,MACZ,QAAQ,KAAK;AAAA,IACf,CAAC;AAED,SAAK,YAAY,KAAK,gBAAgB,KAAK;AAAA,EAC7C;AAAA,EAEU,qBAAqB;AAC7B,WAAO,KAAK,IAAI,mBAAmB,KAAK,mBAAmB,IAAI,KAAK,gBAAgB;AAAA,EACtF;AAAA,EAEU,kBAAkB;AAC1B,SAAK,IAAI,aAAa,KAAK,mBAAmB;AAE9C,SAAK,IAAI,SAAS,SAAS,KAAK,UAAU;AAE1C,SAAK,UAAU,KAAK,IAAI,QAAQ,GAAG,KAAK,CAAC;AACzC,SAAK,UAAU,KAAK,IAAI,QAAQ,GAAG,IAAI,CAAC;AAIxC,SAAK,WAAW,cAAc,KAAK,IAAI,SAAS,SAAS,WAAW,YAAY,KAAK;AAErF,SAAK,IAAI,YAAY,KAAK,gBAAgB;AAAA,EAC5C;AAAA,EAEU,iCAAiC;AACzC,SAAK,IAAI,cAAc;AACvB,QAAI,KAAK,IAAI,2BAA2B,KAAK,mBAAmB,CAAC,GAAG;AAClE,oBAAAC,QAAO,MAAM,yCAAyC;AAAA,IACxD;AACA,SAAK,gBAAgB;AAAA,EACvB;AACF;AAEA,IAAO,qBAAQ;",
  "names": ["BaseComponent", "FontStyles", "logger"]
}
